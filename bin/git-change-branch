#!/bin/bash

set -eo pipefail

history_file="$(git rev-parse --git-dir)/history"

git checkout $@
branch=$(git symbolic-ref HEAD 2> /dev/null) || exit 0
if [ -e $history_file ]; then
  sed -i '' -e "\\@^$branch @d" "$history_file"
fi
echo "$branch $(date +%s)" >> "$history_file"
